export type Severity = "CRITICAL" | "HIGH" | "MEDIUM" | "LOW"

export interface BugResult {
  description: string
  severity: Severity
  wcw: number // 1=正确, 0=漏报, -1=误报
  Greptile: number
  Copilot: number
  CodeRabbit: number
  Cursor: number
  Graphite: number
}

export interface ProjectData {
  name: string
  bugs: BugResult[]
}

// 原始评测矩阵数据
export const benchmarkData: ProjectData[] = [
  {
    name: "Sentry",
    bugs: [
      {
        description: "高流量审计日志的分页性能增强\n导入不存在的OptimizedCursorPaginator",
        severity: "HIGH",
        wcw: 0,
        Greptile: -1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "优化缓冲区插入，插入时进行驱逐\n负偏移光标作绕过分页边界",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "支持上采样错误计数并进行性能优化\nsample_rate = 0.0 是假且跳过",
        severity: "LOW",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "GitHub OAuth 安全增强\n如果缺少github_authenticated_user状态，则为空引用",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 0,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "重放自助批量删除系统\n错误响应格式的重大变更",
        severity: "CRITICAL",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: '带健康监测的跨缓冲区多进程增强\n"shard"和"shards"的度量标记不一致',
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "实现跨系统发行同步\n数据类时间戳中的共享可变默认",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "重组事件创建/问题发生逻辑\n使用过时的配置变量而不是更新后的配置变量",
        severity: "HIGH",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "新增使用队列管理并行的能力\n队列无效。ShutDown 异常处理",
        severity: "HIGH",
        wcw: 0,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "添加钩子以产生有状态检测器中的出现\n不完整实现（仅包含通行证）",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
    ],
  },
  {
    name: "Cal.com",
    bugs: [
      {
        description: "appStore 包的异步导入\nforEach 中的异步回调会产生未处理的承诺拒绝",
        severity: "LOW",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "特色：双重认证备份代码\n备份码使用后未被取消",
        severity: "CRITICAL",
        wcw: 0,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "修复：在 destinationCalendar 上处理集体多主机\n如果数组为空，则为空引用错误",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "feat：将InsightsBookingService转换为使用Prisma.sql原始查询\n原始SQL查询构建中的潜在SQL注入风险",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "为预订生命周期事件提供全面的工作流程提醒管理\n当 immediateDelete 为真时，缺少数据库清理",
        severity: "HIGH",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "高级日期覆盖处理和时区兼容性改进\n错误地计算了用slotStartTime而不是slotEndTime的结束时间",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "OAuth 凭证同步与应用集成增强\n使用直接字符串比较的时序攻击漏洞",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "短信流程提醒、重试计数跟踪\nOR条件会导致所有工作流程提醒被删除",
        severity: "HIGH",
        wcw: 1,
        Greptile: 0,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "为现有预订添加宾客管理功能\n电子邮件黑名单中的大小写敏感性绕过",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "专长：添加日历缓存状态和作（#22532）\n由于不可靠的更新At字段导致缓存状态追踪不准确",
        severity: "LOW",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
    ],
  },
  {
    name: "Grafana",
    bugs: [
      {
        description: "匿名：添加可配置的设备限制\nCreateOrUpdateDevice 方法中的竞态条件",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "AuthZService：改进 authz 缓存\n缓存条目未过期导致永久许可被拒",
        severity: "HIGH",
        wcw: 1,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "插件：任务：将仪表中间件重命名为指标中间件\n未定义端点常数导致编译错误",
        severity: "CRITICAL",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "高级查询处理架构\n双重插值风险",
        severity: "CRITICAL",
        wcw: 0,
        Greptile: 0,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "通知规则处理引擎\n缺少键道具导致React渲染问题",
        severity: "MEDIUM",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "双存储架构\n错误的指标记录方法导致误导性的绩效跟踪",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 1,
      },
      {
        description: "数据库性能优化\n错误级别日志错误",
        severity: "LOW",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 1,
      },
      {
        description: "前端资产优化\n并发注释删除作中的死锁潜能",
        severity: "HIGH",
        wcw: 0,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "高级SQL分析框架\nenableSqlExpressions 函数总是返回 false，禁用 SQL 功能",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 1,
      },
      {
        description: "统一存储性能优化\n缓存锁定中的竞态条件",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
    ],
  },
  {
    name: "Keycloak",
    bugs: [
      {
        description: "修复通过通行密钥重新认证的问题\nConditionalPasskeysEnabled（） 调用时没有 UserModel 参数",
        severity: "MEDIUM",
        wcw: 0,
        Greptile: -1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "为 IdentityProviderStorageProvider .getForLogin作添加缓存支持\n递归缓存调用使用会话代替代理",
        severity: "CRITICAL",
        wcw: 0,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description:
          "添加 AuthzClientCryptoProvider 以进行授权客户端密码作\n返回错误的提供商（默认密钥存储，而不是 BouncyCastle）",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "添加滚动更新功能标志和兼容性框架\n错误的出口代码方法调用",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "向授权模式添加客户端资源类型和作用域\n功能标志不一致导致权限被遗弃的错误",
        severity: "HIGH",
        wcw: 1,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "向授权模式添加组资源类型和作用域\ncanManage（） 方法中的权限检查错误",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "为翻译消息资源添加HTML消毒剂\n立陶宛语翻译文件包含意大利语文本",
        severity: "LOW",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "实现访问令牌上下文编码框架\nnull 检查中参数错误（grantType vs. rawTokenId）",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "为用户存储提供商实现恢复密钥支持\n不安全的原始列表反序列化，但没有类型安全",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "修复并发组访问以防止NullPointerException\n缺少空检查导致NullPointerException",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
    ],
  },
  {
    name: "Discourse",
    bugs: [
      {
        description: "功能：自动压缩大图\n方法覆盖导致参数不匹配",
        severity: "MEDIUM",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "功能：邮件中按主题取消订阅选项\n无引用，不存在 TopicUser",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "为被封锁用户添加全面的邮件验证\nBlockedEmail.should_block？读取时修改数据库",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "增强嵌入URL处理和验证系统\n使用未验证的open（url）SSRF漏洞",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "利用Flexbox混音优化头部布局性能\n混合浮点：左边用Flexbox会导致布局问题",
        severity: "LOW",
        wcw: 0,
        Greptile: 0,
        Copilot: 0,
        CodeRabbit: 1,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "用户体验：如果网站域名与实例域名相同，则显示完整的 URL 路径\n带有<<算符的弦变音",
        severity: "MEDIUM",
        wcw: 0,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "比例色彩$lightness必须使用$secondary来处理暗色主题\n主题颜色的不一致会影响可见度",
        severity: "LOW",
        wcw: 0,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 1,
        Cursor: 1,
        Graphite: 0,
      },
      {
        description: "修正：正确处理组员身份\n异步成员加载中的竞态条件",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 0,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "功能：本地化备份（服务器端）\n懒惰的线程安全问题@loaded_locales",
        severity: "HIGH",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 0,
        Graphite: 0,
      },
      {
        description: "功能：可以编辑类别/宿主关系以进行嵌入\nNoMethodError before_validation in EmbeddableHost",
        severity: "CRITICAL",
        wcw: 1,
        Greptile: 1,
        Copilot: 1,
        CodeRabbit: 0,
        Cursor: 1,
        Graphite: 0,
      },
    ],
  },
]

// 工具列表
export const tools = ["wcw", "Greptile", "Copilot", "CodeRabbit", "Cursor", "Graphite"] as const

export type Tool = (typeof tools)[number]
